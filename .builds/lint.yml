image: archlinux
packages:
  - rust
  - git
sources:
  - https://git.sr.ht/~charmitro/peak-mem
tasks:
  - clippy: |
      cd peak-mem
      cargo clippy --all-targets --all-features -- -D warnings
  - fmt-check: |
      cd peak-mem
      rustup toolchain install nightly
      cargo +nightly fmt --check
